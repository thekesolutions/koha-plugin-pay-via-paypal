(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4],{312:function(e,t,r){var content=r(354);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(62).default)("99ad5b04",content,!0,{sourceMap:!1})},353:function(e,t,r){"use strict";var n=r(312);r.n(n).a},354:function(e,t,r){(e.exports=r(61)(!1)).push([e.i,".rotate[data-v-125bc901]{transform:rotate(180deg)}.rotatable[data-v-125bc901]{transition:transform .3s}button[data-v-125bc901]{background-image:none}",""])},397:function(e,t,r){"use strict";r.r(t);r(37),r(20),r(15),r(11),r(28),r(43),r(44),r(70),r(47);var n=r(8),o=(r(191),r(12)),l=r(117),c=r(396),d=r(356),v=r(394),f=r.n(v),m=r(395),h=r.n(m);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x,k={name:"Configure",components:{VJsonschemaForm:c.a,Property:d.a},data:function(){return{selected_idx:0,prev_selected_idx:0,next_selected_idx:0,general:{},inherit:{},mini:!1,default_inherit:[],library_add:null,gen_form_valid:!0,lib_form_valid:!0,dialog:!1,options:{debug:!0,disableAll:!1,autoFoldObjects:!1,accordionMode:"normal",requiredMessage:this.$t("required")}}},computed:y({},Object(l.d)({generalConfs:function(e){return f.a.merge({},e.general)},libraryConfs:function(e){return f.a.merge([],e.libConfs)},snack:"snackbar"}),{},Object(l.d)("libraries",{libraries:function(e){return f.a.merge([],e.list)}}),{showSnackbar:{get:function(){return!!this.snack},set:function(){this.snackbar(!1)}},schema:y({},Object(l.d)("schema",{get:function(e){return f.a.merge({},e.schema)}}),{},Object(l.c)("schema",{set:"set_schema"})),defaultActive:function(){return this.schema.properties.perLibraryOptions&&this.schema.properties.perLibraryOptions.properties.active&&this.libraryConfs.find((function(e){return null===e.library_id})).active},libDialog:function(){return this.dialog&&this.selected_idx>0&&this.defaultActive},defDialog:function(){return this.dialog&&(0===this.selected_idx||!this.defaultActive)}}),fetch:(x=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,t.params,e.next=3,r.dispatch("get_configs");case 3:case"end":return e.stop()}}),e)}))),function(e){return x.apply(this,arguments)}),methods:y({},Object(l.c)(["general_confs","library_confs","snackbar"]),{},Object(l.b)({store:"save"}),{setDefaultOptions:function(){for(var e in console.log(this.inherit),this.inherit)if(console.log(e),this.inherit[e]){console.log(this.libraryConfs[this.selected_idx]);var t=e.split(".").reduce((function(e,t,i){return 0===i?{prev:e,key:t}:{prev:e.prev,key:t}}),this.libraryConfs[this.selected_idx]);t.prev[t.key]=null}},save:function(){if(this.setDefaultOptions(),!this.$refs.lib_form.validate())return this.dialog=!0,void event.preventDefault();this.general_confs(f.a.merge({},this.generalConfs)),this.library_confs(f.a.merge([],this.libraryConfs)),this.store()},getColor:function(e){return h.a.getColor({text:e.library_id||this.$t("all")})},getTextColor:function(e){return this.getContrastYIQ(this.getColor(e))},getName:function(e){return e.library_id?this.libraries&&this.libraries.length?this.libraries.find((function(t){return t.library_id===e.library_id})).name:"":this.$t("allLibs")},stringToColor:function(e){return h.a.getColor({text:e})},addLibrary:function(){this.library_add&&(this.libraryConfs.push({library_id:this.library_add}),this.library_add=null)},getContrastYIQ:function(e){return e=e.replace("#",""),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=125?"black--text":"white--text"},unconfLibraries:function(){var e=this;return this.libraries.filter((function(t){return t.library_id&&!e.libraryConfs.find((function(e){return t.library_id===e.library_id}))}))},setInherit:function(e,t,r){this.inherit.hasOwnProperty(t)||this.$set(this.inherit,t,e.hasOwnProperty("x-set-inherit")?e["x-set-inherit"]:null===r)},checkForm:function(e,i){var t=this;if(this.setDefaultOptions(),!this.$refs.lib_form.validate())return this.dialog=!0,this.$nextTick((function(){t.next_selected_idx=t.prev_selected_idx,t.prev_selected_idx=t.selected_idx})),void e.preventDefault();this.$nextTick((function(){t.selected_idx=t.prev_selected_idx,Object.keys(t.inherit).forEach((function(e){t.$delete(t.inherit,e)}))}))},forcedContinue:function(){var e=this;this.dialog=!1,this.$refs.lib_form.inputs.forEach((function(input){input.validate()||(input.value=null)})),this.$nextTick((function(){e.selected_idx=e.prev_selected_idx=e.next_selected_idx}))}})},w=(r(353),r(63)),O=r(84),C=r.n(O),V=r(601),j=r(489),D=r(362),L=r(400),N=r(393),$=r(308),I=r(599),P=r(591),S=r(587),A=r(592),T=r(593),E=r(384),F=r(594),K=r(363),R=r(365),J=r(334),M=r(367),Q=r(305),W=r(368),Y=r(597),B=r(595),G=r(309),X=r(596),z=r(590),component=Object(w.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("v-container",[e.schema&&e.schema.properties&&e.schema.properties.generalOptions?r("v-card",[r("v-card-actions",[r("v-btn",{attrs:{disabled:!e.gen_form_valid||!e.lib_form_valid},on:{click:function(t){return e.save()}}},[r("v-icon",[e._v("mdi-check")]),e._v(" "),r("span",{directives:[{name:"t",rawName:"v-t",value:"save",expression:"'save'"}]})],1)],1),e._v(" "),r("v-card-title",{directives:[{name:"t",rawName:"v-t",value:"generalOps.title",expression:"'generalOps.title'"}]}),e._v(" "),r("v-card-text",[r("v-form",{ref:"gen_form",model:{value:e.gen_form_valid,callback:function(t){e.gen_form_valid=t},expression:"gen_form_valid"}},[r("v-jsonschema-form",{attrs:{schema:e.schema.properties.generalOptions,model:e.generalConfs,options:e.options}})],1)],1)],1):e._e(),e._v(" "),e.schema&&e.schema.properties&&e.schema.properties.perLibraryOptions?r("v-card",[r("v-card-title",{directives:[{name:"t",rawName:"v-t",value:"perLibraryOps.title",expression:"'perLibraryOps.title'"}]}),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{md:"auto"}},[r("v-navigation-drawer",{attrs:{"mini-variant":e.mini,permanent:""}},[r("v-list-item",[r("v-btn",{staticClass:"rotatable",class:{rotate:e.mini},attrs:{icon:""},on:{click:function(t){e.mini=!e.mini}}},[r("v-icon",[e._v("mdi-chevron-left")])],1),e._v(" "),r("v-slide-x-transition",[r("v-autocomplete",{attrs:{items:e.unconfLibraries(),"item-text":"name","item-value":"library_id",label:e.$t("addLib"),hint:"Search to add a library"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addLibrary()}},model:{value:e.library_add,callback:function(t){e.library_add=t},expression:"library_add"}})],1),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addLibrary()}}},[r("v-icon",[e._v("mdi-plus")])],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-list",[r("v-list-item-group",{attrs:{mandatory:"",color:"primary"},model:{value:e.prev_selected_idx,callback:function(t){e.prev_selected_idx=t},expression:"prev_selected_idx"}},e._l(e.libraryConfs,(function(t,i){return r("v-list-item",{key:i,ref:"lib_"+i,refInFor:!0,attrs:{inactive:e.selected_idx!==i},on:{click:function(t){return t.stopPropagation(),e.checkForm(t,i)}}},[r("v-list-item-avatar",[r("v-avatar",{staticClass:"font-weight-black",class:e.getTextColor(t),attrs:{color:e.getColor(t)}},[e._v("\n                        "+e._s(t.library_id||e.$t("all"))+"\n                      ")])],1),e._v(" "),r("v-list-item-content",{attrs:{transition:"fade-transition"}},[r("v-list-item-title",[e._v(e._s(e.getName(t)))])],1)],1)})),1)],1)],1)],1),e._v(" "),r("v-col",[r("v-form",{ref:"lib_form",model:{value:e.lib_form_valid,callback:function(t){e.lib_form_valid=t},expression:"lib_form_valid"}},[e._l(e.libraryConfs,(function(t,i){return[e.selected_idx===i?r("v-jsonschema-form",{key:i,attrs:{schema:e.schema.properties.perLibraryOptions,model:t,options:e.options},scopedSlots:e._u([null!=t.library_id&&e.defaultActive?{key:"prepend-custom-inherit",fn:function(t){var n=t.model,o=(t.modelWrapper,t.modelKey),l=(t.modelRoot,t.schema),c=t.fullKey;return[r("v-col",{attrs:{cols:e.inherit[c]?12:2}},[e._v("\n                      "+e._s(e.setInherit(l,c,n))+"\n                      "),r("v-checkbox",{attrs:{hint:e.$t("perLibraryOps.use"),"persistent-hint":!e.inherit[c]},scopedSlots:e._u([{key:"label",fn:function(){return[e.inherit[c]?r("div",[e._v("\n                            "+e._s(e.$t("perLibraryOps.using",{name:l.title||o}))+"\n                          ")]):e._e()]},proxy:!0}],null,!0),model:{value:e.inherit[c],callback:function(t){e.$set(e.inherit,c,t)},expression:"inherit[fullKey]"}})],1)]}}:null,null!=t.library_id&&e.defaultActive?{key:"custom-inherit",fn:function(t){var n=t.schema,o=t.modelWrapper,l=t.modelKey,c=t.modelRoot,d=t.options,v=t.fullKey,f=t.required;return[r("v-col",{attrs:{cols:"10"}},[e.inherit[v]?e._e():r("property",{attrs:{schema:n,"model-wrapper":o,"model-key":l,"parent-key":v,"model-root":c,required:f,options:d}})],1)]}}:null],null,!0)}):e._e()]}))],2),e._v(" "),r("v-dialog",{attrs:{"max-width":"600"},model:{value:e.libDialog,callback:function(t){e.libDialog=t},expression:"libDialog"}},[r("v-card",[r("v-card-title",{directives:[{name:"t",rawName:"v-t",value:"dialog.change",expression:"'dialog.change'"}],staticClass:"headline"}),e._v(" "),r("v-card-text",[r("v-list",[r("v-list-item",{directives:[{name:"t",rawName:"v-t",value:"dialog.invalid",expression:"'dialog.invalid'"}],staticClass:"body-1"}),e._v(" "),r("v-list-item",[r("v-alert",{directives:[{name:"t",rawName:"v-t",value:"dialog.warning",expression:"'dialog.warning'"}],attrs:{type:"warning"}})],1),e._v(" "),r("v-list-item",{directives:[{name:"t",rawName:"v-t",value:"dialog.continue",expression:"'dialog.continue'"}],staticClass:"body-1"})],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{directives:[{name:"t",rawName:"v-t",value:"cancel",expression:"'cancel'"}],attrs:{color:"primary",outlined:""},on:{click:function(t){e.dialog=!1}}}),e._v(" "),r("v-btn",{directives:[{name:"t",rawName:"v-t",value:"continue",expression:"'continue'"}],attrs:{color:"primary",outlined:""},on:{click:function(t){return e.forcedContinue()}}})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"600"},model:{value:e.defDialog,callback:function(t){e.defDialog=t},expression:"defDialog"}},[r("v-card",[r("v-card-title",{directives:[{name:"t",rawName:"v-t",value:"dialog.mandatory",expression:"'dialog.mandatory'"}],staticClass:"headline"}),e._v(" "),r("v-card-text",[r("v-list",[r("v-list-item",{directives:[{name:"t",rawName:"v-t",value:"dialog.invalid",expression:"'dialog.invalid'"}],staticClass:"body-1"}),e._v(" "),r("v-list-item",[r("v-alert",{directives:[{name:"t",rawName:"v-t",value:0===e.selected_idx?"dialog.error":"dialog.noDef",expression:"selected_idx===0?'dialog.error':'dialog.noDef'"}],attrs:{type:"error"}})],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{directives:[{name:"t",rawName:"v-t",value:"agree",expression:"'agree'"}],attrs:{color:"primary",outlined:""},on:{click:function(t){e.dialog=!1}}})],1)],1)],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{disabled:!e.gen_form_valid||!e.lib_form_valid},on:{click:function(t){return e.save()}}},[r("v-icon",[e._v("mdi-check")]),e._v(" "),r("span",{directives:[{name:"t",rawName:"v-t",value:"save",expression:"'save'"}]})],1)],1)],1):e._e()],1),e._v(" "),r("v-snackbar",{attrs:{color:e.snack.type,timeout:3e3},model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[e._v("\n    "+e._s(e.snack.message)+"\n  ")])],1)}),[],!1,null,"125bc901",null);t.default=component.exports;C()(component,{VAlert:V.a,VAutocomplete:j.a,VAvatar:D.a,VBtn:L.a,VCard:N.a,VCardActions:$.a,VCardText:$.b,VCardTitle:$.c,VCheckbox:I.a,VCol:P.a,VContainer:S.a,VContent:A.a,VDialog:T.a,VDivider:E.a,VForm:F.a,VIcon:K.a,VList:R.a,VListItem:J.a,VListItemAvatar:M.a,VListItemContent:Q.a,VListItemGroup:W.a,VListItemTitle:Q.b,VNavigationDrawer:Y.a,VRow:B.a,VSlideXTransition:G.e,VSnackbar:X.a,VSpacer:z.a})},598:function(e,t,r){"use strict";r.r(t);r(15),r(11),r(28),r(69),r(81);var n={configure:r(397).default},o={components:n,computed:{child:function(){return/configure/i.test(window.location)?"configure":""}},created:function(){if(!Object.keys(n).includes(this.child))throw new Error({statusCode:404,message:"No component found"})}},l=r(63),c=r(84),d=r.n(c),v=r(588),f=r(589),component=Object(l.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-layout",[t("v-flex",{staticClass:"text-center"},["configure"==this.child?t("configure"):this._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VFlex:v.a,VLayout:f.a})}}]);